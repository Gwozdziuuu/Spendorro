# HTTP server configuration
quarkus.http.port=${QUARKUS_HTTP_PORT:8213}
quarkus.http.root-path=/

# CORS configuration
quarkus.http.cors.enabled=true
%dev.quarkus.http.cors.origins=/.*/

# Banner configuration
quarkus.banner.path=banner.txt

# Database configuration
# Dev/Test mode: Quarkus Dev Services automatically starts PostgreSQL
# Production: Set QUARKUS_DATASOURCE_* environment variables
quarkus.datasource.db-kind=postgresql

# Hibernate ORM configuration
quarkus.hibernate-orm.log.sql=${QUARKUS_HIBERNATE_ORM_LOG_SQL:false}

# Liquibase configuration
quarkus.liquibase.migrate-at-start=${QUARKUS_LIQUIBASE_MIGRATE_AT_START:true}
quarkus.liquibase.change-log=db/changeLog.xml

# Telegram Bot configuration
telegram.bot.token=${TELEGRAM_BOT_TOKEN:8397385598:AAGu5myCIRYiY2uFM8CU1u-vEklQUQ-21Kg}
telegram.bot.username=${TELEGRAM_BOT_USERNAME:categorizzo_bot}
telegram.webhook.url=${TELEGRAM_WEBHOOK_URL:http://localhost:8081}

# Telegram API client configuration
quarkus.rest-client.telegram-api.url=https://api.telegram.org

# MinIO configuration
minio.endpoint=${MINIO_ENDPOINT:http://localhost:9100}
minio.access-key=${MINIO_ACCESS_KEY:minioadmin}
minio.secret-key=${MINIO_SECRET_KEY:minioadmin}
minio.bucket-name=${MINIO_BUCKET_NAME:images}

# OpenAI integration configuration
openai.url=${OPENAI_URL:https://openai.mrngwozdz.com}
openai.token=${OPENAI_TOKEN:}
openai.model=${OPENAI_MODEL:gpt-4o}

# HTTP Auth permissions - conditionally protect endpoints
# In dev/test mode, permit all access to protected endpoints
%dev.quarkus.http.auth.permission.permit-all.paths=/events,/user/*
%dev.quarkus.http.auth.permission.permit-all.policy=permit

%test.quarkus.http.auth.permission.permit-all.paths=/events,/user/*
%test.quarkus.http.auth.permission.permit-all.policy=permit

# In production, require authentication based on app.authorization.enabled
%prod.quarkus.http.auth.permission.auth-required.paths=/events,/user/*
%prod.quarkus.http.auth.permission.auth-required.policy=authenticated

# Keycloak OIDC configuration
quarkus.oidc.auth-server-url=${KEYCLOAK_URL:http://localhost:9080}/realms/spendorro
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID:spendorro-be}
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:3V09QOHrkQSrQvUYECokZg7jbosLo1vE}

# Native build configuration
quarkus.native.builder-image=quay.io/quarkus/ubi9-quarkus-mandrel-builder-image:jdk-21
quarkus.native.additional-build-args=-J-Xmx${QUARKUS_NATIVE_MEMORY:16g},-H:MaxRuntimeCompileMethods=${QUARKUS_NATIVE_MAX_RUNTIME_COMPILE_METHODS:1000}